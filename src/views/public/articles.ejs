<!-- Articles List Page with Hero Banner (matches About) -->
<section class="relative text-white py-16 md:py-20" style="background-image: url('https://res.cloudinary.com/dr5pehdsw/image/upload/v1769501045/p4_JAKARTA.jpg_oepawj.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="max-w-7xl mx-auto px-4 text-center relative z-10">
        <h1 class="text-4xl md:text-5xl font-heading font-bold mb-4">Artikel</h1>
        <p class="text-lg md:text-xl mb-6 text-primary-100">Informasi dan berita seputar P4 Jakarta Timur</p>
    </div>
</section>

<section class="py-12 md:py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
        
        <!-- Articles Grid -->
        <% if (articles && articles.length > 0) { %>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <% articles.forEach(function(article) { %>
            <article class="bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow">
                <% if (article.featured_image || article.image_url) { %>
                <img src="<%= article.featured_image || article.image_url %>" alt="<%= article.title %>" class="w-full h-48 object-cover">
                <% } else { %>
                <div class="w-full h-48 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center">
                    <svg class="w-16 h-16 text-white opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                    </svg>
                </div>
                <% } %>
                <div class="p-4 md:p-6">
                    <p class="text-xs text-gray-500 mb-2">
                        <%= new Date(article.published_at || article.created_at).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' }) %>
                    </p>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-primary-600 transition-colors cursor-pointer">
                        <%= article.title %>
                    </h3>
                    <p class="text-gray-600 text-sm line-clamp-3 mb-3">
                        <%= article.excerpt || article.content.replace(/<[^>]*>/g, '').substring(0, 150) %>...
                    </p>
                    <a href="/artikel/<%= article.slug %>" class="inline-flex items-center bg-primary-600 text-white px-3 py-2 rounded-md hover:bg-primary-700 transition-colors font-medium">
                        Baca Selengkapnya
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                    </a>
                </div>
            </article>
            <% }); %>
        </div>

        <!-- Pagination -->
        <% if (totalPages > 1) { %>
        <div class="flex justify-center items-center space-x-2">
            <!-- First Page -->
            <% if (currentPage > 1) { %>
            <a href="/artikel?page=1" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                &laquo;
            </a>
            <% } else { %>
            <span class="px-3 py-2 bg-gray-100 border border-gray-300 rounded-md text-gray-400 cursor-not-allowed">
                &laquo;
            </span>
            <% } %>

            <!-- Previous Page -->
            <% if (currentPage > 1) { %>
            <a href="/artikel?page=<%= currentPage - 1 %>" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                &lt;
            </a>
            <% } else { %>
            <span class="px-3 py-2 bg-gray-100 border border-gray-300 rounded-md text-gray-400 cursor-not-allowed">
                &lt;
            </span>
            <% } %>

            <!-- Page Numbers -->
            <% 
            // Calculate page range to show
            let startPage = Math.max(1, currentPage - 2);
            let endPage = Math.min(totalPages, currentPage + 2);
            
            // Adjust if we're near the start or end
            if (currentPage <= 3) {
                endPage = Math.min(5, totalPages);
            }
            if (currentPage >= totalPages - 2) {
                startPage = Math.max(1, totalPages - 4);
            }
            
            // Show first page if not in range
            if (startPage > 1) { %>
                <a href="/artikel?page=1" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                    1
                </a>
                <% if (startPage > 2) { %>
                <span class="px-2 text-gray-500">...</span>
                <% } %>
            <% }
            
            // Show page numbers
            for (let i = startPage; i <= endPage; i++) { %>
                <% if (i === currentPage) { %>
                <span class="px-3 py-2 bg-primary-600 text-white border border-primary-600 rounded-md font-semibold">
                    <%= i %>
                </span>
                <% } else { %>
                <a href="/artikel?page=<%= i %>" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                    <%= i %>
                </a>
                <% } %>
            <% }
            
            // Show last page if not in range
            if (endPage < totalPages) { %>
                <% if (endPage < totalPages - 1) { %>
                <span class="px-2 text-gray-500">...</span>
                <% } %>
                <a href="/artikel?page=<%= totalPages %>" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                    <%= totalPages %>
                </a>
            <% } %>

            <!-- Next Page -->
            <% if (currentPage < totalPages) { %>
            <a href="/artikel?page=<%= currentPage + 1 %>" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                &gt;
            </a>
            <% } else { %>
            <span class="px-3 py-2 bg-gray-100 border border-gray-300 rounded-md text-gray-400 cursor-not-allowed">
                &gt;
            </span>
            <% } %>

            <!-- Last Page -->
            <% if (currentPage < totalPages) { %>
            <a href="/artikel?page=<%= totalPages %>" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                &raquo;
            </a>
            <% } else { %>
            <span class="px-3 py-2 bg-gray-100 border border-gray-300 rounded-md text-gray-400 cursor-not-allowed">
                &raquo;
            </span>
            <% } %>
        </div>
        
        <!-- Page Info -->
        <div class="text-center mt-4 text-sm text-gray-600">
            Halaman <%= currentPage %> dari <%= totalPages %> (<%= totalArticles %> artikel)
        </div>
        <% } %>

        <% } else { %>
        <!-- Empty State -->
        <div class="bg-white rounded-lg shadow p-12 text-center">
            <svg class="w-20 h-20 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">Belum Ada Artikel</h3>
            <p class="text-gray-500">Artikel akan ditampilkan di sini setelah dipublikasikan.</p>
        </div>
        <% } %>
    </div>
</section>
