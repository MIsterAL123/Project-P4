<!-- Hero Section -->
<section class="relative text-white py-12 md:py-20" style="background-image: url('https://res.cloudinary.com/dr5pehdsw/image/upload/v1769501045/p4_JAKARTA.jpg_oepawj.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="max-w-7xl mx-auto px-4 text-center relative z-10">
        <h1 class="text-3xl md:text-5xl font-heading font-bold mb-4 md:mb-6">
            Selamat Datang di P4 Jakarta Timur
        </h1>
        <p class="text-lg md:text-xl mb-6 md:mb-8 text-primary-100">
            Pusat Pelatihan dan Pengembangan Pendidikan Jakarta Timur
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-3 md:gap-4">
            <a href="/auth/register-peserta" class="btn bg-white text-primary-600 hover:bg-gray-100">
                <i class="fas fa-user-plus mr-2"></i>
                Daftar Peserta Didik
            </a>
            <a href="/auth/register-guru" class="btn bg-white text-primary-600 hover:bg-gray-100">
                <i class="fas fa-chalkboard-teacher mr-2"></i>
                Daftar Pendidik
            </a>
        </div>
    </div>
</section>

<!-- Articles Section -->
<section class="py-12 md:py-16">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-8 md:mb-12">
            <h2 class="text-2xl md:text-3xl font-heading font-bold mb-3">Artikel Terbaru</h2>
            <p class="text-gray-600">Informasi dan berita seputar P4 Jakarta Timur</p>
        </div>
        
        <% if (articles && articles.length > 0) { %>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <% articles.forEach(function(article) { %>
            <article class="bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow">
                <% if (article.featured_image || article.image_url) { %>
                <img src="<%= article.featured_image || article.image_url %>" alt="<%= article.title %>" class="w-full h-48 object-cover">
                <% } else { %>
                <div class="w-full h-48 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center">
                    <svg class="w-16 h-16 text-white opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                    </svg>
                </div>
                <% } %>
                <div class="p-4 md:p-6">
                    <p class="text-xs text-gray-500 mb-2">
                        <%= new Date(article.created_at).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' }) %>
                    </p>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-primary-600 transition-colors cursor-pointer">
                        <%= article.title %>
                    </h3>
                    <p class="text-gray-600 text-sm line-clamp-3">
                        <%= article.content.replace(/<[^>]*>/g, '').substring(0, 150) %>...
                    </p>
                    <a href="/artikel/<%= article.slug %>" class="inline-flex items-center bg-primary-600 text-white px-3 py-2 rounded-md hover:bg-primary-700 transition-colors font-medium mt-3">
                        Baca Selengkapnya
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                    </a>
                </div>
            </article>
            <% }); %>
        </div>
        <div class="text-center mt-8">
            <a href="/artikel" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors shadow-md">
                Lihat Semua Artikel
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                </svg>
            </a>
        </div>
        <% } else { %>
        <div class="bg-white rounded-lg shadow p-8 text-center">
            <p class="text-gray-500">Belum ada artikel.</p>
        </div>
        <% } %>
    </div>
</section>

<!-- Pelatihan Section -->
<section class="py-12 md:py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-8 md:mb-12">
            <h2 class="text-2xl md:text-3xl font-heading font-bold mb-3">Pelatihan Tersedia</h2>
            <p class="text-gray-600">Daftar pelatihan yang sedang dibuka</p>
        </div>
        
        <% if (kuotaList && kuotaList.length > 0) { %>
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pelatihan</th>
                            <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Waktu</th>
                            <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell">Target</th>
                            <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Kuota</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <% kuotaList.forEach(function(kuota) { %>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 md:px-6 py-4">
                                <div class="text-sm font-medium text-gray-900"><%= kuota.judul_pelatihan || 'Pelatihan ' + kuota.tahun_ajaran %></div>
                                <div class="text-xs text-gray-500 md:hidden mt-1">
                                    <% if (kuota.tanggal_mulai) { %>
                                    <%= new Date(kuota.tanggal_mulai).toLocaleDateString('id-ID', {day: 'numeric', month: 'short'}) %> - <%= new Date(kuota.tanggal_selesai).toLocaleDateString('id-ID', {day: 'numeric', month: 'short'}) %>
                                    <% } %>
                                </div>
                            </td>
                            <td class="px-4 md:px-6 py-4 whitespace-nowrap hidden md:table-cell">
                                <div class="text-sm text-gray-600">
                                    <% if (kuota.tanggal_mulai && kuota.tanggal_selesai) { %>
                                    <%= new Date(kuota.tanggal_mulai).toLocaleDateString('id-ID', {day: 'numeric', month: 'short', year: 'numeric'}) %>
                                    <br>s/d <%= new Date(kuota.tanggal_selesai).toLocaleDateString('id-ID', {day: 'numeric', month: 'short', year: 'numeric'}) %>
                                    <% } else { %>
                                    <%= kuota.tahun_ajaran %>
                                    <% } %>
                                </div>
                            </td>
                            <td class="px-4 md:px-6 py-4 whitespace-nowrap hidden sm:table-cell">
                                <% if (kuota.target_peserta === 'guru') { %>
                                <span class="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">Pendidik</span>
                                <% } else if (kuota.target_peserta === 'peserta') { %>
                                <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Peserta Didik</span>
                                <% } else { %>
                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Semua</span>
                                <% } %>
                            </td>
                            <td class="px-4 md:px-6 py-4 whitespace-nowrap">
                                <% if (kuota.status === 'open') { %>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Dibuka</span>
                                <% } else { %>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800">Ditutup</span>
                                <% } %>
                            </td>
                            <td class="px-4 md:px-6 py-4 whitespace-nowrap hidden md:table-cell">
                                <div class="text-sm text-gray-600">
                                    <%= kuota.peserta_terdaftar || 0 %>/<%= kuota.max_peserta %>
                                </div>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="text-center mt-6">
            <a href="/pelatihan" class="text-primary-600 hover:text-primary-800 font-medium">
                Lihat Semua Pelatihan â†’
            </a>
        </div>
        <% } else { %>
        <div class="bg-white rounded-lg shadow p-8 text-center">
            <p class="text-gray-500">Belum ada pelatihan yang dibuka saat ini.</p>
        </div>
        <% } %>
    </div>
</section>

<!-- CTA Section -->
<section class="bg-primary-600 py-12 md:py-16">
    <div class="max-w-4xl mx-auto px-4 text-center text-white">
        <h2 class="text-2xl md:text-3xl font-heading font-bold mb-4">Siap Bergabung?</h2>
        <p class="text-primary-100 mb-6 md:mb-8">Daftar sekarang dan tingkatkan kompetensi Anda!</p>
        <div class="flex flex-col sm:flex-row justify-center gap-3">
            <a href="/auth/register-peserta" class="btn bg-white text-primary-600 hover:bg-gray-100 px-8">
                Daftar Peserta Didik
            </a>
            <a href="/auth/register-guru" class="btn bg-white text-primary-600 hover:bg-gray-100 px-8">
                Daftar Pendidik
            </a>
        </div>
    </div>
</section>